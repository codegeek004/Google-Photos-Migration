<h1>Google Photos Migration</h1>

<form method="POST" action="{% url 'destination_google_auth' %}">
    {% csrf_token %}
    <label for="destination_email">Destination Account Email:</label>
    <input type="email" id="destination_email" name="destination_email" required />
    <button type="submit">Authenticate Destination Account</button>
</form>

{% if success_all %}
    <p>All photos have been successfully migrated!</p>
{% elif success_selected %}
    <p>Selected photos have been successfully migrated!</p>
{% endif %}

<form method="POST">
    {% csrf_token %}
    <table>
        <thead>
            <tr>
                <th>Select</th>
                <th>Preview</th>
                <th>File Name</th>
            </tr>
        </thead>
        <tbody>
            {% for photo in photos %}
                <tr>
                    <td><input type="checkbox" name="selected_photos" value="{{ photo.id }}"></td>
                    <td><img src="{{ photo.baseUrl }}=s150" alt="{{ photo.filename }}"></td>
                    <td>{{ photo.filename }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    <button type="submit" name="action" value="migrate_all">Migrate All Photos</button>
    <button type="submit" name="action" value="migrate_selected">Migrate Selected Photos</button>
</form>

{% if next_page_token %}
    <a href="?page_token={{ next_page_token }}">Next Page</a>
{% endif %}
